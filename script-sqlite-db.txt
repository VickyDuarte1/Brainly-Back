-- SQLite script generated by SQLite Studio
-- Date: 2023-03-14 15:58:51

PRAGMA foreign_keys = off;
BEGIN TRANSACTION;

-- Table `mydb`.`diagnosis`
CREATE TABLE IF NOT EXISTS `diagnosis` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `type` INTEGER NOT NULL,
  `message` VARCHAR(255) NOT NULL DEFAULT 0,
  `date` DATE NOT NULL,
  UNIQUE (`id`)
);

-- Table `mydb`.`doctor`
CREATE TABLE IF NOT EXISTS `doctor` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `id-user` INTEGER NOT NULL,
  `id-diagnosis` INTEGER NULL,
  `name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `birthdate` DATE NOT NULL,
  `registration` VARCHAR(255) NOT NULL,
  `admin` INTEGER NOT NULL DEFAULT 0,
  UNIQUE (`id`),
  FOREIGN KEY (`id-user`) REFERENCES `user` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION,
  FOREIGN KEY (`id-diagnosis`) REFERENCES `diagnosis` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION
);

-- Table `mydb`.`user`
CREATE TABLE IF NOT EXISTS `user` (
  `id` INTEGER PRIMARY KEY AUTOINCREMENT,
  `id-doctor` INTEGER NOT NULL,
  `id-diagnosis` INTEGER NULL,
  `name` VARCHAR(255) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `images` VARCHAR(255) NULL,
  `birthdate` DATE NOT NULL,
  `admin` INTEGER NOT NULL,
  UNIQUE (`id`),
  UNIQUE (`id-doctor`),
  FOREIGN KEY (`id-doctor`) REFERENCES `doctor` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION,
  FOREIGN KEY (`id-diagnosis`) REFERENCES `diagnosis` (`id`) ON UPDATE NO ACTION ON DELETE NO ACTION
);

-- Table `mydb`.`timestamps`
CREATE TABLE IF NOT EXISTS `timestamps` (
  `create_time` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` TIMESTAMP NULL
);

PRAGMA foreign_keys = on;
COMMIT;